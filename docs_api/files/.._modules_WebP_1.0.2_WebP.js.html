<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../modules/WebP/1.0.2/WebP.js - open jquery components library</title>
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/widget.css">
    <link rel="stylesheet" href="../assets/css/tabview.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/comps1.js"></script>
    <script src="../assets/js/comps2.js"></script>
    <script src="../assets/js/comps3.js"></script>
    <script src="../assets/js/comps4.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../jc_logo.png" title="open jquery components library"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/.window.html">.window</a></li>
            
                <li><a href="../classes/JC.AjaxTree.html">JC.AjaxTree</a></li>
            
                <li><a href="../classes/JC.AjaxUpload.html">JC.AjaxUpload</a></li>
            
                <li><a href="../classes/JC.alert.html">JC.alert</a></li>
            
                <li><a href="../classes/JC.AutoChecked.html">JC.AutoChecked</a></li>
            
                <li><a href="../classes/JC.AutoComplete.html">JC.AutoComplete</a></li>
            
                <li><a href="../classes/JC.AutoSelect.html">JC.AutoSelect</a></li>
            
                <li><a href="../classes/JC.BaseMVC.html">JC.BaseMVC</a></li>
            
                <li><a href="../classes/JC.BaseMVC.Model.html">JC.BaseMVC.Model</a></li>
            
                <li><a href="../classes/JC.Calendar.html">JC.Calendar</a></li>
            
                <li><a href="../classes/JC.common.html">JC.common</a></li>
            
                <li><a href="../classes/JC.confirm.html">JC.confirm</a></li>
            
                <li><a href="../classes/JC.Cover.html">JC.Cover</a></li>
            
                <li><a href="../classes/JC.DCalendar.html">JC.DCalendar</a></li>
            
                <li><a href="../classes/JC.Dialog.html">JC.Dialog</a></li>
            
                <li><a href="../classes/JC.Dialog.alert.html">JC.Dialog.alert</a></li>
            
                <li><a href="../classes/JC.Dialog.confirm.html">JC.Dialog.confirm</a></li>
            
                <li><a href="../classes/JC.Dialog.mask.html">JC.Dialog.mask</a></li>
            
                <li><a href="../classes/JC.Dialog.msgbox.html">JC.Dialog.msgbox</a></li>
            
                <li><a href="../classes/JC.Drag.html">JC.Drag</a></li>
            
                <li><a href="../classes/JC.DragSelect.html">JC.DragSelect</a></li>
            
                <li><a href="../classes/JC.f.html">JC.f</a></li>
            
                <li><a href="../classes/JC.FChart.html">JC.FChart</a></li>
            
                <li><a href="../classes/JC.Fixed.html">JC.Fixed</a></li>
            
                <li><a href="../classes/JC.FlowChart.html">JC.FlowChart</a></li>
            
                <li><a href="../classes/JC.FormFillUrl.html">JC.FormFillUrl</a></li>
            
                <li><a href="../classes/JC.FrameUtil.html">JC.FrameUtil</a></li>
            
                <li><a href="../classes/JC.hideAllPanel.html">JC.hideAllPanel</a></li>
            
                <li><a href="../classes/JC.hideAllPopup.html">JC.hideAllPopup</a></li>
            
                <li><a href="../classes/JC.ImageCutter.html">JC.ImageCutter</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.html">JC.LunarCalendar</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.Model.html">JC.LunarCalendar.Model</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.View.html">JC.LunarCalendar.View</a></li>
            
                <li><a href="../classes/JC.msgbox.html">JC.msgbox</a></li>
            
                <li><a href="../classes/JC.NumericStepper.html">JC.NumericStepper</a></li>
            
                <li><a href="../classes/JC.Paginator.html">JC.Paginator</a></li>
            
                <li><a href="../classes/JC.Panel.html">JC.Panel</a></li>
            
                <li><a href="../classes/JC.Panel.Model.html">JC.Panel.Model</a></li>
            
                <li><a href="../classes/JC.Panel.View.html">JC.Panel.View</a></li>
            
                <li><a href="../classes/JC.Placeholder.html">JC.Placeholder</a></li>
            
                <li><a href="../classes/JC.PopTips.html">JC.PopTips</a></li>
            
                <li><a href="../classes/JC.Rate.html">JC.Rate</a></li>
            
                <li><a href="../classes/JC.Scrollbar.html">JC.Scrollbar</a></li>
            
                <li><a href="../classes/JC.ServerSort.html">JC.ServerSort</a></li>
            
                <li><a href="../classes/JC.Slider.html">JC.Slider</a></li>
            
                <li><a href="../classes/JC.Slider.Model.html">JC.Slider.Model</a></li>
            
                <li><a href="../classes/JC.StepControl.html">JC.StepControl</a></li>
            
                <li><a href="../classes/JC.Suggest.html">JC.Suggest</a></li>
            
                <li><a href="../classes/JC.Tab.html">JC.Tab</a></li>
            
                <li><a href="../classes/JC.Tab.Model.html">JC.Tab.Model</a></li>
            
                <li><a href="../classes/JC.Tab.View.html">JC.Tab.View</a></li>
            
                <li><a href="../classes/JC.TableFreeze.html">JC.TableFreeze</a></li>
            
                <li><a href="../classes/JC.Tips.html">JC.Tips</a></li>
            
                <li><a href="../classes/JC.Tips.Model.html">JC.Tips.Model</a></li>
            
                <li><a href="../classes/JC.Tips.View.html">JC.Tips.View</a></li>
            
                <li><a href="../classes/JC.Tree.html">JC.Tree</a></li>
            
                <li><a href="../classes/JC.Tree.Model.html">JC.Tree.Model</a></li>
            
                <li><a href="../classes/JC.Valid.html">JC.Valid</a></li>
            
                <li><a href="../classes/window.Bizs.ActionLogic.html">window.Bizs.ActionLogic</a></li>
            
                <li><a href="../classes/window.Bizs.AutoSelectComplete.html">window.Bizs.AutoSelectComplete</a></li>
            
                <li><a href="../classes/window.Bizs.ChangeLogic.html">window.Bizs.ChangeLogic</a></li>
            
                <li><a href="../classes/window.Bizs.CommonModify.html">window.Bizs.CommonModify</a></li>
            
                <li><a href="../classes/window.Bizs.CRMSchedule.html">window.Bizs.CRMSchedule</a></li>
            
                <li><a href="../classes/window.Bizs.CustomColumn.html">window.Bizs.CustomColumn</a></li>
            
                <li><a href="../classes/window.Bizs.DisableLogic.html">window.Bizs.DisableLogic</a></li>
            
                <li><a href="../classes/window.Bizs.DMultiDate.html">window.Bizs.DMultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.DropdownTree.html">window.Bizs.DropdownTree</a></li>
            
                <li><a href="../classes/window.Bizs.FormLogic.html">window.Bizs.FormLogic</a></li>
            
                <li><a href="../classes/window.Bizs.KillISPCache.html">window.Bizs.KillISPCache</a></li>
            
                <li><a href="../classes/window.Bizs.MoneyTips.html">window.Bizs.MoneyTips</a></li>
            
                <li><a href="../classes/window.Bizs.MultiAutoComplete.html">window.Bizs.MultiAutoComplete</a></li>
            
                <li><a href="../classes/window.Bizs.MultiDate.html">window.Bizs.MultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelect.html">window.Bizs.MultiSelect</a></li>
            
                <li><a href="../classes/window.Bizs.MultiselectPanel.html">window.Bizs.MultiselectPanel</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelectTree.html">window.Bizs.MultiSelectTree</a></li>
            
                <li><a href="../classes/window.Bizs.MultiUpload.html">window.Bizs.MultiUpload</a></li>
            
                <li><a href="../classes/window.Bizs.TaskViewer.html">window.Bizs.TaskViewer</a></li>
            
                <li><a href="../classes/window.jQuery.html">window.jQuery</a></li>
            
                <li><a href="../classes/window.jQuery.mousewheel.html">window.jQuery.mousewheel</a></li>
            
                <li><a href="../classes/window.JSON.html">window.JSON</a></li>
            
                <li><a href="../classes/window.Raphael.html">window.Raphael</a></li>
            
                <li><a href="../classes/window.requirejs.html">window.requirejs</a></li>
            
                <li><a href="../classes/window.swfobject.html">window.swfobject</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../modules/WebP/1.0.2/WebP.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * HTML WebP Plugin v1.0.2
 *   By EtherDream (zjcqoo@163.com)
 * Update: 2012/11/27
 */
(function()
{
	var __VER__ = navigator.userAgent;
	var __IE__ = /MSIE/.test(__VER__);
	var __IE67__ = /MSIE 6|MSIE 7/.test(__VER__);
	var __STD__ = !!window.addEventListener;
	var dummy;


	// flash resize callback
	__WEBPCALL__ = function(id, w, h)
	{
		arrDOM[id].width = w + &quot;px&quot;;
		arrDOM[id].height = h + &quot;px&quot;;
	}

	// firefox: &#x27;onerror&#x27; occurs before &#x27;DOMContentLoaded&#x27;
	var hasDCL;
	if (__STD__)
		document.addEventListener(&quot;DOMContentLoaded&quot;, function(){hasDCL = true}, false);
	
	function handle_inserted(e)
	{
		if (e.target instanceof HTMLImageElement)
			WatchImg(e.target);
	}

	function handle_loaded()
	{
		var col = [].slice.call(document.images);
		var n = col.length;

		while(n--)
			WatchImg(col[n]);
	}

	function handle_forbid_std(e)
	{
		e.preventDefault();
		e.stopPropagation();
	}

	function handle_memu(e)
	{
		e = e || event;
		if (e.button != 2)
			return;

		var dom = e.srcElement || e.target;
		if (dom.tagName != &quot;EMBED&quot;)
			return;

		if (!/WebP.swf/.test(dom.src))
			return;

		if (__IE__)
		{
			// disable flash menu
			dummy.setCapture();
			setTimeout(function(){dummy.releaseCapture()}, 0);
		}
		else
		{
			handle_forbid_std(e);
		}
	}




	function copy_sty_std(src, dst)
	{
		src = getComputedStyle(src);
		dst = dst.style;

		for(var i = 0, n = src.length; i &lt; n; i++)
		{
			k = src[i];
			if (k != &quot;width&quot; &amp;&amp; k != &quot;height&quot;)
				dst.setProperty(k, src.getPropertyValue(k), null);
		}
	}

	function copy_sty_ie678(src, dst)
	{
		src = src.currentStyle;
		dst = dst.style;

		for(var k in src)
			if (k != &quot;width&quot; &amp;&amp; k != &quot;height&quot;)
				dst[k] = src[k];
	}

	function copy_attr_std(src, dst)
	{
		var attrs = src.attributes;
		for(var i = 0, n = attrs.length; i &lt; n; i++)
		{
			var attr = attrs[i];
			var name = attr.name;
			if (name != &quot;src&quot;)
				dst.setAttribute(name, attr.value);
		}
	}

	function copy_attr_ie67(src, dst)
	{
		var __ATTR__ = {&quot;class&quot;: &quot;className&quot;, &quot;for&quot;: &quot;htmlFor&quot;};

		var attrs = src.attributes;
		for(var i = 0, n = attrs.length; i &lt; n; i++)
		{
			var attr = attrs[i];
			var name = attr.name;
			if (name != &quot;src&quot;)
			{
				name = __ATTR__[name] || name;
				value = src.getAttribute(name, 2);

				if (value &amp;&amp; value.length != 0)
					dst.setAttribute(name, value);
			}
		}
	}


	var arrDOM = [];

	function WatchImg(img)
	{
		if (img.getAttribute(&quot;WEBPON&quot;))
			return;
		
		// only match *.webp*
		var reg = /.webp$/i;
		if (!reg.test(img.src))
			return;

		img.setAttribute(&quot;WEBPON&quot;, 1);

		// create flash
		var fla = document.createElement(&quot;embed&quot;);
		fla.src = &quot;WebP.swf&quot;;
		fla.width = 28;
		fla.height = 28;

		// clone img&#x27;s style
		try
		{
			__STD__?
				copy_sty_std(img, fla):
				copy_sty_ie678(img, fla);
		}
		catch(e)
		{}

		// clone img&#x27;s attribute
		try
		{
			__IE67__?
				copy_attr_ie67(img, fla):
				copy_attr_std(img, fla);
		}
		catch(e)
		{}
 
		fla.setAttribute(&quot;wmode&quot;, &quot;transparent&quot;);
		fla.setAttribute(&quot;flashvars&quot;, &quot;id=&quot; + arrDOM.length + &quot;&amp;url=&quot; + escape(img.src));

		if (!__IE__)
			fla.addEventListener(&quot;mouseover&quot;, handle_forbid_std, false);

		// replace img element
		arrDOM.push(fla);
		img.parentNode.replaceChild(fla, img);
	}

	function setup()
	{
		__STD__ ? setup_std() : setup_ie678();
	}

	function setup_std()
	{
		if (hasDCL)
			handle_loaded();
		else
			document.addEventListener(&quot;DOMContentLoaded&quot;, handle_loaded, false);

		document.addEventListener(&quot;DOMNodeInserted&quot;, handle_inserted, false);
		document.addEventListener(&quot;mousedown&quot;, handle_memu, true);
	}

	function setup_ie678()
	{
		window.__WATCHIMG__ = WatchImg;

		// FIX: [statusbar bug]
		dummy = document.createElement(&quot;div&quot;);
		dummy.style.display = &quot;none&quot;;
		document.body.appendChild(dummy);
		dummy.removeBehavior(dummy.addBehavior(&quot;WebP.htc&quot;));

		document.createStyleSheet()
			.addRule(&quot;img&quot;, &quot;behavior:url(WebP.htc)&quot;);

		document.attachEvent(&quot;onmousedown&quot;, handle_memu);
	}

	function init()
	{
		// native support check
		var t = new Image;
		t.onerror = setup;
		t.src = &quot;data:image/webp;base64,UklGRjAAAABXRUJQVlA4ICQAAACyAgCdASoBAAEALy2Wy2WlpaWlpYEsSygABc6zbAAA/upgAAA=&quot;;
	}
	init();
})();
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
