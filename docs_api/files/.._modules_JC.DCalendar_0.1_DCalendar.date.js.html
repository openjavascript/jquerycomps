<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../modules/JC.DCalendar/0.1/DCalendar.date.js - open jquery components library</title>
    <link rel="stylesheet" href="../assets/css/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="stylesheet" href="../assets/css/widget.css">
    <link rel="stylesheet" href="../assets/css/tabview.css">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="../assets/js/yui-min.js"></script>
    <script src="../assets/js/comps1.js"></script>
    <script src="../assets/js/comps2.js"></script>
    <script src="../assets/js/comps3.js"></script>
    <script src="../assets/js/comps4.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../jc_logo.png" title="open jquery components library"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 0.2</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/.window.html">.window</a></li>
            
                <li><a href="../classes/JC.AjaxTree.html">JC.AjaxTree</a></li>
            
                <li><a href="../classes/JC.AjaxUpload.html">JC.AjaxUpload</a></li>
            
                <li><a href="../classes/JC.alert.html">JC.alert</a></li>
            
                <li><a href="../classes/JC.AutoChecked.html">JC.AutoChecked</a></li>
            
                <li><a href="../classes/JC.AutoComplete.html">JC.AutoComplete</a></li>
            
                <li><a href="../classes/JC.AutoSelect.html">JC.AutoSelect</a></li>
            
                <li><a href="../classes/JC.BaseMVC.html">JC.BaseMVC</a></li>
            
                <li><a href="../classes/JC.BaseMVC.Model.html">JC.BaseMVC.Model</a></li>
            
                <li><a href="../classes/JC.Calendar.html">JC.Calendar</a></li>
            
                <li><a href="../classes/JC.common.html">JC.common</a></li>
            
                <li><a href="../classes/JC.confirm.html">JC.confirm</a></li>
            
                <li><a href="../classes/JC.Cover.html">JC.Cover</a></li>
            
                <li><a href="../classes/JC.DCalendar.html">JC.DCalendar</a></li>
            
                <li><a href="../classes/JC.Dialog.html">JC.Dialog</a></li>
            
                <li><a href="../classes/JC.Dialog.alert.html">JC.Dialog.alert</a></li>
            
                <li><a href="../classes/JC.Dialog.confirm.html">JC.Dialog.confirm</a></li>
            
                <li><a href="../classes/JC.Dialog.mask.html">JC.Dialog.mask</a></li>
            
                <li><a href="../classes/JC.Dialog.msgbox.html">JC.Dialog.msgbox</a></li>
            
                <li><a href="../classes/JC.Drag.html">JC.Drag</a></li>
            
                <li><a href="../classes/JC.DragSelect.html">JC.DragSelect</a></li>
            
                <li><a href="../classes/JC.f.html">JC.f</a></li>
            
                <li><a href="../classes/JC.FChart.html">JC.FChart</a></li>
            
                <li><a href="../classes/JC.Fixed.html">JC.Fixed</a></li>
            
                <li><a href="../classes/JC.FlowChart.html">JC.FlowChart</a></li>
            
                <li><a href="../classes/JC.FormFillUrl.html">JC.FormFillUrl</a></li>
            
                <li><a href="../classes/JC.FrameUtil.html">JC.FrameUtil</a></li>
            
                <li><a href="../classes/JC.hideAllPanel.html">JC.hideAllPanel</a></li>
            
                <li><a href="../classes/JC.hideAllPopup.html">JC.hideAllPopup</a></li>
            
                <li><a href="../classes/JC.ImageCutter.html">JC.ImageCutter</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.html">JC.LunarCalendar</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.Model.html">JC.LunarCalendar.Model</a></li>
            
                <li><a href="../classes/JC.LunarCalendar.View.html">JC.LunarCalendar.View</a></li>
            
                <li><a href="../classes/JC.msgbox.html">JC.msgbox</a></li>
            
                <li><a href="../classes/JC.NumericStepper.html">JC.NumericStepper</a></li>
            
                <li><a href="../classes/JC.Paginator.html">JC.Paginator</a></li>
            
                <li><a href="../classes/JC.Panel.html">JC.Panel</a></li>
            
                <li><a href="../classes/JC.Panel.Model.html">JC.Panel.Model</a></li>
            
                <li><a href="../classes/JC.Panel.View.html">JC.Panel.View</a></li>
            
                <li><a href="../classes/JC.Placeholder.html">JC.Placeholder</a></li>
            
                <li><a href="../classes/JC.PopTips.html">JC.PopTips</a></li>
            
                <li><a href="../classes/JC.Rate.html">JC.Rate</a></li>
            
                <li><a href="../classes/JC.Scrollbar.html">JC.Scrollbar</a></li>
            
                <li><a href="../classes/JC.ServerSort.html">JC.ServerSort</a></li>
            
                <li><a href="../classes/JC.Slider.html">JC.Slider</a></li>
            
                <li><a href="../classes/JC.Slider.Model.html">JC.Slider.Model</a></li>
            
                <li><a href="../classes/JC.StepControl.html">JC.StepControl</a></li>
            
                <li><a href="../classes/JC.Suggest.html">JC.Suggest</a></li>
            
                <li><a href="../classes/JC.Tab.html">JC.Tab</a></li>
            
                <li><a href="../classes/JC.Tab.Model.html">JC.Tab.Model</a></li>
            
                <li><a href="../classes/JC.Tab.View.html">JC.Tab.View</a></li>
            
                <li><a href="../classes/JC.TableFreeze.html">JC.TableFreeze</a></li>
            
                <li><a href="../classes/JC.Tips.html">JC.Tips</a></li>
            
                <li><a href="../classes/JC.Tips.Model.html">JC.Tips.Model</a></li>
            
                <li><a href="../classes/JC.Tips.View.html">JC.Tips.View</a></li>
            
                <li><a href="../classes/JC.Tree.html">JC.Tree</a></li>
            
                <li><a href="../classes/JC.Tree.Model.html">JC.Tree.Model</a></li>
            
                <li><a href="../classes/JC.Valid.html">JC.Valid</a></li>
            
                <li><a href="../classes/window.Bizs.ActionLogic.html">window.Bizs.ActionLogic</a></li>
            
                <li><a href="../classes/window.Bizs.AutoSelectComplete.html">window.Bizs.AutoSelectComplete</a></li>
            
                <li><a href="../classes/window.Bizs.ChangeLogic.html">window.Bizs.ChangeLogic</a></li>
            
                <li><a href="../classes/window.Bizs.CommonModify.html">window.Bizs.CommonModify</a></li>
            
                <li><a href="../classes/window.Bizs.CRMSchedule.html">window.Bizs.CRMSchedule</a></li>
            
                <li><a href="../classes/window.Bizs.CustomColumn.html">window.Bizs.CustomColumn</a></li>
            
                <li><a href="../classes/window.Bizs.DisableLogic.html">window.Bizs.DisableLogic</a></li>
            
                <li><a href="../classes/window.Bizs.DMultiDate.html">window.Bizs.DMultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.DropdownTree.html">window.Bizs.DropdownTree</a></li>
            
                <li><a href="../classes/window.Bizs.FormLogic.html">window.Bizs.FormLogic</a></li>
            
                <li><a href="../classes/window.Bizs.KillISPCache.html">window.Bizs.KillISPCache</a></li>
            
                <li><a href="../classes/window.Bizs.MoneyTips.html">window.Bizs.MoneyTips</a></li>
            
                <li><a href="../classes/window.Bizs.MultiAutoComplete.html">window.Bizs.MultiAutoComplete</a></li>
            
                <li><a href="../classes/window.Bizs.MultiDate.html">window.Bizs.MultiDate</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelect.html">window.Bizs.MultiSelect</a></li>
            
                <li><a href="../classes/window.Bizs.MultiselectPanel.html">window.Bizs.MultiselectPanel</a></li>
            
                <li><a href="../classes/window.Bizs.MultiSelectTree.html">window.Bizs.MultiSelectTree</a></li>
            
                <li><a href="../classes/window.Bizs.MultiUpload.html">window.Bizs.MultiUpload</a></li>
            
                <li><a href="../classes/window.Bizs.TaskViewer.html">window.Bizs.TaskViewer</a></li>
            
                <li><a href="../classes/window.jQuery.html">window.jQuery</a></li>
            
                <li><a href="../classes/window.jQuery.mousewheel.html">window.jQuery.mousewheel</a></li>
            
                <li><a href="../classes/window.JSON.html">window.JSON</a></li>
            
                <li><a href="../classes/window.Raphael.html">window.Raphael</a></li>
            
                <li><a href="../classes/window.requirejs.html">window.requirejs</a></li>
            
                <li><a href="../classes/window.swfobject.html">window.swfobject</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../modules/JC.DCalendar/0.1/DCalendar.date.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
;(function(define, _win) { &#x27;use strict&#x27;; define( [&#x27;JC.BaseMVC&#x27;], function () {
/**
 * 双日历日期选择组件
 * &lt;p&gt;
 *      &lt;b&gt;require&lt;/b&gt;: 
 *          &lt;a href=&#x27;window.jQuery.html&#x27;&gt;jQuery&lt;/a&gt;
 *          , &lt;a href=&#x27;JC.BaseMVC.html&#x27;&gt;JC.BaseMVC&lt;/a&gt;
 * &lt;/p&gt;
 * &lt;p&gt;&lt;a href=&#x27;https://github.com/openjavascript/jquerycomps&#x27; target=&#x27;_blank&#x27;&gt;JC Project Site&lt;/a&gt;
 * | &lt;a href=&#x27;http://jc2.openjavascript.org/docs_api/classes/JC.DCalendar.html&#x27; target=&#x27;_blank&#x27;&gt;API docs&lt;/a&gt;
 * | &lt;a href=&#x27;../../modules/JC.DCalendar/0.1/_demo&#x27; target=&#x27;_blank&#x27;&gt;demo link&lt;/a&gt;&lt;/p&gt;
 *
 * &lt;p&gt;&lt;/p&gt;
 *
 * &lt;h2&gt;可用的 HTML attribute&lt;/h2&gt;
 *
 * &lt;dl&gt;
 *      &lt;dt&gt;datatype = string 必填项&lt;/dt&gt;
 *      &lt;dd&gt;声明日历控件的类型：
 *      &lt;br/&gt;&lt;b&gt;ddate:&lt;/b&gt; 日期日历
 *      &lt;br/&gt;&lt;b&gt;drange:&lt;/b&gt; 日期范围日历( 成对出现 )
 *      &lt;/dd&gt;
 *
 *      &lt;dt&gt;minvalue = ISO Date&lt;/dt&gt;
 *      &lt;dd&gt;日期的最小时间, YYYY-MM-DD&lt;/dd&gt;
 *
 *      &lt;dt&gt;maxvalue = ISO Date&lt;/dt&gt;
 *      &lt;dd&gt;日期的最大时间, YYYY-MM-DD&lt;/dd&gt;
 *
 *      &lt;dt&gt;currentcanselect = bool, default = true&lt;/dt&gt;
 *      &lt;dd&gt;当前日期是否能选择&lt;/dd&gt;
 *
 *      &lt;dt&gt;monthmum = int&lt;/dt&gt;
 *      &lt;dd&gt;
 *          声明显示月份日历面板的个数（一次性可显示2到12个月份），默认为2（双日历）
 *      &lt;/dd&gt;
 *
 *      &lt;dt&gt;showtype = block || float &lt;/dt&gt;
 *      &lt;dd&gt;
 *          声明月份日历面板的显示方式，默认为float&lt;br/&gt;
 *          float（比如两个月份并排显示） &lt;a href=&quot;../../modules/JC.DCalendar/0.1/res/default/style.html#float&quot; target=&quot;_blank&quot;&gt;查看&lt;/a&gt;&lt;br/&gt;
 *          block （月份日历面板竖排显示）&lt;a href=&quot;../../modules/JC.DCalendar/0.1/res/default/style.html#block&quot; target=&quot;_blank&quot;&gt;查看&lt;/a&gt;&lt;br/&gt;
 *      &lt;/dd&gt;
 *
 *      &lt;dt&gt;calendarshow = function&lt;/dt&gt;
 *      &lt;dd&gt;显示日历显示后的回调
&lt;pre&gt;function calendarShow( selector ) {
    var ins = this;
    JC.log( &quot;calendarshow&quot;, new Date().getTime(), selector.val() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *      &lt;dt&gt;calendarhide = function&lt;/dt&gt;
 *      &lt;dd&gt;隐藏日历后的回调
&lt;pre&gt;function calendarhide( selector ) {
    JC.log( &quot;calendarhide&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *      &lt;dt&gt;calendarclear = function&lt;/dt&gt;
 *      &lt;dd&gt;清空选中日期后的回调
&lt;pre&gt;function calendarclear( selector ) {
    JC.log( &quot;calendarclear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updatedate = function&lt;/dt&gt;
 *     &lt;dd&gt;选中日期后回调
&lt;pre&gt;function updatedate( selector ) {
    JC.log( &quot;updatedate&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updatemonth = function&lt;/dt&gt;
 *     &lt;dd&gt;选中月份后回调
&lt;pre&gt;function updatemonth( selector ) {
    JC.log( &quot;updatedatemonth&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updateyear = function&lt;/dt&gt;
 *     &lt;dd&gt;选中年份后回调
&lt;pre&gt;function updateyear( selector ) {
    JC.log( &quot;updatedateyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;beforeupdateyear = function&lt;/dt&gt;
 *     &lt;dd&gt;更新年份前的回调，即年份日历面板出来时
&lt;pre&gt;function beforeupdateyear( selector ) {
    JC.log( &quot;beforeupdateyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;beforeupdatemonth = function&lt;/dt&gt;
 *     &lt;dd&gt;更新月份前的回调，即月份日历面板出来时
&lt;pre&gt;function beforeupdateymonth( selector ) {
    JC.log( &quot;beforeupdateymonth&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;beforeupdatemont = function&lt;/dt&gt;
 *     &lt;dd&gt;更新月份前的回调，即月份日历面板出来时
&lt;pre&gt;function beforeupdateymonth( selector ) {
    JC.log( &quot;beforeupdateymonth&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updateprevpageyear = function&lt;/dt&gt;
 *     &lt;dd&gt;点击上一页年份时的回调
&lt;pre&gt;function updatprevtpageyear( selector ) {
    JC.log( &quot;updateprevpageyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updatenextpageyear = function&lt;/dt&gt;
 *     &lt;dd&gt;点击下一页年份时的回调
&lt;pre&gt;function updatenextpageyear( selector ) {
    JC.log( &quot;updatenextpageyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updateprevyear = function&lt;/dt&gt;
 *     &lt;dd&gt;点击上一年时的回调，月份日历面板点击上一页
&lt;pre&gt;function updatprevyear( selector ) {
    JC.log( &quot;updateprevyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updatenextyear = function&lt;/dt&gt;
 *     &lt;dd&gt;点击下一年时的回调，月份日历面板点击下一页
&lt;pre&gt;function updatenextyear( selector ) {
    JC.log( &quot;updatenextyear&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updateprevmonth = function&lt;/dt&gt;
 *     &lt;dd&gt;点击上一月时的回调，日期日历面板点击上一页
&lt;pre&gt;function updatprevmonth( selector ) {
    JC.log( &quot;updateprevmonth&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 *     &lt;dt&gt;updatenextmonth = function&lt;/dt&gt;
 *     &lt;dd&gt;点击下一月时的回调，日期日历面板点击下一页
&lt;pre&gt;function updatenextmonth( selector ) {
    JC.log( &quot;updatenextmonth&quot;, $(selector).val(), new Date().getTime() );
}&lt;/pre&gt;&lt;/dd&gt;
 *
 * &lt;/dl&gt; 
 *
 * @namespace JC
 * @class DCalendar
 * @extends JC.BaseMVC
 * @constructor
 * @param   {selector|string}   _selector   
 * @version dev 0.1 2013-12-20
 * @author  zuojing   &lt;zuojing1013@gmail.com&gt; | 75 Team
*/
    JC.DCalendar = DCalendar;

    function DCalendar(_selector) {
        _selector &amp;&amp; (_selector = $(_selector));
        if ( DCalendar.getInstance(_selector) ) return DCalendar.getInstance(_selector);
        DCalendar.getInstance(_selector, this);
        this._model = new DCalendar.Model(_selector);
        this._view = new DCalendar.View(this._model);
        this._init();

        //JC.log( &#x27;DCalendar inited&#x27;, new Date().getTime() );
    }

    /**
     * 获取或设置 DCalendar 的实例
     * @method  getInstance
     * @param   {selector}      _selector
     * @static
     * @return  {DCalendarInstance}
     */
    DCalendar.getInstance = function (_selector, _setter) {
        var _type = DCalendar._type( _selector );

        if ( typeof _selector === &#x27;string&#x27; &amp;&amp; !/&lt;/.test( _selector ) ) 
            _selector = $(_selector);
        
        if ( !(_selector &amp;&amp; _selector.length ) || ( typeof _selector === &#x27;string&#x27; ) ) return;
        
        if ( typeof _setter !== &#x27;undefined&#x27; ) {
            DCalendar.ins[_type] = _setter;
        }
        
        return DCalendar.ins[_type];
    };

    DCalendar.ins = {};
    /**
     * 初始化可识别的 DCalendar 实例
     * @method  init
     * @param   {selector}      _selector
     * @param   {bool}          _onlyStatus     default = false
     * @static
     * @return  {Array of DCalendarInstance}
     */
    DCalendar.init = function (_selector, _onlyStatus) {
        var _r = [] ;

        typeof _selector === &#x27;boolean&#x27; &amp;&amp; ( _onlyStatus = _selector, _selector = document );
        
        _selector = $(_selector || document);

        if ( _selector.length ) {
            var _nodeName = _selector.length === 1 ? _selector.prop(&#x27;nodeName&#x27;).toLowerCase() : &#x27;&#x27;;

            if ( _nodeName &amp;&amp; (_nodeName === &#x27;input&#x27; || _nodeName === &#x27;button&#x27;) ) {
                DCalendar._initStatus( _selector );
                
            } else {
                _selector.find([ 
                                    &#x27;input[datatype=ddate]&#x27;
                                    , &#x27;input[datatype=drange]&#x27;
                                    , &#x27;button[datatype=ddate]&#x27; 
                                    , &#x27;input[multidate=ddate]&#x27; 
                                    , &#x27;button[multidate=ddate]&#x27; 
                                ].join()).each( function() {
                    DCalendar._initStatus( $(this) );
                    
                })
            }
        }

        return _r;
    };

    /**
     * 初始化可识别的 DCalendar 的状态
     * @method  _initStatus
     * @param   {selector}      _selector
     * @static
     * @protected
     */
    DCalendar._initStatus = function (_selector) {
        var _tmp;

        _selector &amp;&amp; ( _selector = $(_selector) );
        if( !( _selector &amp;&amp; _selector.length ) ) return;
        
        _selector.val() 
            &amp;&amp; ( _tmp = JC.f.dateDetect( _selector.val() ) )
            &amp;&amp; _selector.val( JC.f.formatISODate( _tmp )  )

        _selector.attr(&#x27;minValue&#x27;)
            &amp;&amp; ( _tmp = JC.f.dateDetect( _selector.attr(&#x27;minValue&#x27;) ) )
            &amp;&amp; _selector.attr(&#x27;minValue&#x27;, JC.f.formatISODate( _tmp ))


        _selector.attr( &#x27;maxValue&#x27; )
            &amp;&amp; ( _tmp = JC.f.dateDetect( _selector.attr(&#x27;maxValue&#x27;) ) )
            &amp;&amp; _selector.attr(&#x27;maxValue&#x27;, JC.f.formatISODate( _tmp )  )

        _selector.addClass(&#x27;CDCalendar_icon&#x27;);
    };

    DCalendar._type = function (_selector) {
        // var _r, 
        //     _type = ( ($.trim(_selector.attr(&#x27;multidate&#x27;)) || &#x27;&#x27;).toLowerCase()  )
        //         || ( ($.trim(_selector.attr(&#x27;datatype&#x27;)) || &#x27;&#x27;) .toLowerCase() );

        // _selector　&amp;&amp; ( _selector = $(_selector) );
            
        // switch ( _type ) {
        //     case &#x27;week&#x27;: 
        //     case &#x27;month&#x27;: 
        //     case &#x27;season&#x27;: 
        //     case &#x27;year&#x27;: 
        //     case &#x27;monthday&#x27;: 
        //         {
        //             _r = _type;
        //             break;
        //         }
        //     default: 
        //         _r = &#x27;ddate&#x27;; 
        //         break;
        // }

        return &#x27;_ddate&#x27;;
    },

    DCalendar.update = function () {
        var _items = $(JC.f.printf( &#x27;#{0}&gt;div&#x27;, DCalendar.Model._boxId ));

        if( !_items.length ) return;

        _items.each( function() {
            var _p = $(this), 
                _ins = _p.data( &#x27;CDCalendarIns&#x27; );

            if( !_ins ) return;

            if ( _ins._model.layout().is(&#x27;:visible&#x27;) ) {
                _ins.update();
            }

        });
    },

    /**
     * 弹出日期选择框
     * @method pickDate
     * @static
     * @param   {selector}  _selector 需要显示日期选择框的标签 
     * @example
            &lt;dl&gt;
                &lt;dd&gt;
                    &lt;input type=&quot;text&quot; name=&quot;date6&quot; class=&quot;manualPickDate&quot; value=&quot;20110201&quot; /&gt;
                    manual JC.DCalendar.pickDate
                &lt;/dd&gt;
                &lt;dd&gt;
                    &lt;input type=&quot;text&quot; name=&quot;date7&quot; class=&quot;manualPickDate&quot; /&gt;
                    manual JC.DCalendar.pickDate
                &lt;/dd&gt;
            &lt;/dl&gt;
            &lt;script&gt;
                $(document).delegate(&#x27;input.manualPickDate&#x27;, &#x27;focus&#x27;, function($evt){
                    JC.DCalendar.pickDate( this );
                });
            &lt;/script&gt;
     */  
    DCalendar.pickDate = function (_selector) {
        var _selector = $(_selector),
            _ins, 
            _isIgnore = _selector.is(&#x27;[ignoreprocess]&#x27;);

        if ( !(_selector &amp;&amp; _selector.length) ) return;
        
        if ( ( $(DCalendar.lastSrc)[0] === _selector[0]) &amp;&amp; DCalendar.visible ) {
            _selector.attr(&#x27;cdc_ignore&#x27;, true);
        } else {
            _selector.attr(&#x27;cdc_ignore&#x27;, false);
        }

        if ( JC.f.parseBool( _selector.attr(&#x27;cdc_ignore&#x27;) ) ) {
            return;
        }

        DCalendar.lastSrc = _selector;
        DCalendar.visible = false;

        _selector.attr(&#x27;ignoreprocess&#x27;, true)
            .addClass(&#x27;js_compDCalendar&#x27;)
            .blur();

        !_isIgnore &amp;&amp; _selector.removeAttr(&#x27;ignoreprocess&#x27;);

        _ins = DCalendar.getInstance( _selector );
        !_ins &amp;&amp; ( _ins = new DCalendar( _selector ) );

        _ins.trigger(DCalendar.Model.SHOW);

        return this;
    },

    DCalendar.lastSrc = null,

    BaseMVC.build(DCalendar);

    JC.f.extendObject(DCalendar.prototype, {
        _beforeInit: function () {
            //this.trigger(DCalendar.Model.CDC_INITED );
        },

        _initHanlderEvent: function () {
            var _p = this;

            _p.on(&#x27;CDC_INITED&#x27;, function () {
                _p._model.selector().addClass(&#x27;CDCalendar_icon&#x27;);
            });

            _p._model.selector().on(&#x27;keydown&#x27;, function ( _evt ) {
                _evt.preventDefault();
            });

            _p.on(DCalendar.Model.SHOW, function () {
                _p._model.selector(DCalendar.lastSrc);
                _p._view.show();
                DCalendar.visible = true;
                _p._model.calendarshow()
                    &amp;&amp; _p._model.calendarshow().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.HIDDEN, function () {
                _p._model.selector().addClass(&#x27;cdc_ignore&#x27;, false);
                _p._view.hide();
                DCalendar.visible = false;
                _p.selector().blur();
                _p._model.calendarhide()
                    &amp;&amp; _p._model.calendarhide().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.CHANGE, function (_evt, _srcSelector) {
                _p._view.change(_srcSelector);
            });

            _p.on(DCalendar.Model.SETDATE, function (_evt, _srcSelector) {
                _p._model.setSelected(_srcSelector);
                _p._model.updatedate()
                    &amp;&amp; _p._model.updatedate().call(_p, _p.selector());

            });

            // _p.on(DCalendar.Model.UPDATESELECTOR, function (_evt, _srcSelector) {

            // });

            _p.on(DCalendar.Model.CLEAR, function () {
                _p._model.clear();
                _p._model.calendarclear()
                    &amp;&amp; _p._model.calendarclear().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.DATEVIEW, function (_evt, _srcSelector) {
                _p._view.dateView(_srcSelector);
                _p._model.updatemonth()
                    &amp;&amp; _p._model.updatemonth().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.MONTHVIEW, function (_evt, _srcSelector) {
                _p._view.monthView(_srcSelector);

                if ( $(_srcSelector).attr(&#x27;data-year&#x27;) ) {
                    _p._model.updateyear()
                    &amp;&amp; _p._model.updateyear().call(_p, _p.selector());
                } else {
                    _p._model.beforeupdatemonth()
                        &amp;&amp; _p._model.beforeupdatemonth().call(_p, _p.selector());
                }
                
            });

            _p.on(DCalendar.Model.YEARVIEW, function (_evt, _srcSelector) {
                _p._view.yearView(_srcSelector);
                _p._model.beforeupdateyear()
                    &amp;&amp; _p._model.beforeupdateyear().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATENEXTPAGEYEAR, function () {
                _p._model.updatenextpageyear()
                    &amp;&amp; _p._model.updatenextpageyear().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATEPREVPAGEYEAR, function () {
                _p._model.updateprevpageyear()
                    &amp;&amp; _p._model.updateprevpageyear().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATEPREVMONTH, function () {
                _p._model.updateprevmonth()
                    &amp;&amp; _p._model.updateprevmonth().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATENEXTMONTH, function () {
                _p._model.updatenextmonth()
                    &amp;&amp; _p._model.updatenextmonth().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATEPREVYEAR, function () {
                _p._model.updateprevyear()
                    &amp;&amp; _p._model.updateprevyear().call(_p, _p.selector());
            });

            _p.on(DCalendar.Model.UPDATENEXTYEAR, function () {
                _p._model.updatenextyear()
                    &amp;&amp; _p._model.updatenextyear().call(_p, _p.selector());
            });

        }, 

        _inited: function () {
            
        }

    });
    
    DCalendar.Model._instanceName = &quot;DCalendar&quot;;
    DCalendar.Model.CDC_INITED = &quot;CDC_INITED&quot;;
    DCalendar.Model._boxId = &quot;CompDCalendar&quot;;
    DCalendar.Model.SHOW = &quot;CDC_SHOW&quot;;
    DCalendar.Model.HIDDEN = &quot;CDC_HIDDEN&quot;;
    DCalendar.Model.CHANGE = &quot;CDC_CHANGE&quot;;
    DCalendar.Model.SETDATE = &quot;CDC_SETDATE&quot;;
    DCalendar.Model.DATEVIEW = &quot;CDC_DATEVIEW&quot;;
    DCalendar.Model.MONTHVIEW = &quot;CDC_MONTHVIEW&quot;;
    DCalendar.Model.YEARVIEW = &quot;CDC_YEARVIEW&quot;;
    DCalendar.Model.CLEAR = &quot;CDC_CLEAR&quot;;
    //DCalendar.Model.UPDATESELECTOR = &quot;CDC_UPDATESELECTOR&quot;;
    DCalendar.Model.UPDATENEXTPAGEYEAR = &quot;CDC_UPDATENEXTPAGEYEAR&quot;;
    DCalendar.Model.UPDATEPREVPAGEYEAR = &quot;CDC_UPDATEPREVPAGEYEAR&quot;;
    DCalendar.Model.UPDATEPREVMONTH = &quot;CDC_UPDATEPREVMONTH&quot;;
    DCalendar.Model.UPDATENEXTMONTH = &quot;CDC_UPDATENEXTMONTH&quot;;
    DCalendar.Model.UPDATEPREVYEAR = &quot;CDC_UPDATEPREVYEAR&quot;;
    DCalendar.Model.UPDATENEXTYEAR = &quot;CDC_UPDATENEXTYEAR&quot;;

    JC.f.extendObject(DCalendar.Model.prototype, {
        init: function () {
            var _p = this;
        },

        isDCalendar: function ( _selector ) {
            var _selector = $(_selector),
                _r = 0;
            
            if ( _selector.length ) {
                
                if ( _selector.prop(&#x27;nodeName&#x27;) 
                    &amp;&amp; _selector.attr(&#x27;datatype&#x27;)
                    &amp;&amp; ( _selector.prop(&#x27;nodeName&#x27;).toLowerCase() === &#x27;input&#x27; 
                        || _selector.prop(&#x27;nodeName&#x27;).toLowerCase() === &#x27;button&#x27; )
                    &amp;&amp; ( (_selector.attr(&#x27;datatype&#x27;) || &#x27;&#x27;).toLowerCase() === &#x27;ddate&#x27; 
                        || ( _selector.attr(&#x27;multidate&#x27;) || &#x27;&#x27; ).toLowerCase() === &#x27;ddate&#x27; )
                ) {
                    _r = 1;
                }

                _selector.hasClass(&#x27;js_compDCalendar&#x27;) &amp;&amp; ( _r = 1 );
            }

            return _r;

        },

        curSelectedDate: function () {
            var _p = this,
                _r = _p.selector().val().trim();

            _r = ( JC.f.dateDetect(_r) || new Date() );

            return _r;

        },

        curYear: function () {
            return this.curSelectedDate().getFullYear();
        },
        
        curMonth: function () {
            return this.curSelectedDate().getMonth();
        },

        minValue: function () {
            var _r =  this.attrProp(&#x27;minValue&#x27;) || &#x27;&#x27;;            
            
            _r &amp;&amp; ( _r = JC.f.dateDetect(_r) );

            return _r;
        },

        maxValue: function () {
            var _r = this.attrProp(&#x27;maxValue&#x27;) || &#x27;&#x27;; 
            
            _r &amp;&amp; ( _r = JC.f.dateDetect(_r) );

            return _r;
        },

        minYear: function () {
            var _p = this,
                _r;

            _p.minValue() &amp;&amp; ( _r = _p.minValue().getFullYear() );

            return _r;
        },

        maxYear: function () {
            var _p = this,
                _r;

            _p.maxValue() &amp;&amp; ( _r = _p.maxValue().getFullYear() );

            return _r;
        },

        currentCanSelect: function () {
            var  _r = this.boolProp(&#x27;currentCanSelect&#x27;);

            ( typeof _r === &#x27;undefined&#x27; ) &amp;&amp; ( _r = true );

            return _r;
        },

        weekendCanSelect: function () {
            var  _r = this.boolProp(&#x27;weekendCanSelect&#x27;);

            ( typeof _r === &#x27;undefined&#x27; ) &amp;&amp; ( _r = true );

            return _r;
        },

        /**
         * 显示的月份面板为2到12个
        */
        monthNum: function () {
            var _r = this.intProp(&#x27;monthNum&#x27;);

            (!_r || _r &lt; 2 || _r &gt; 12) &amp;&amp; ( _r = 2 );

            return _r;
        },

        showtype: function () {
            var _r = this.attrProp(&#x27;showtype&#x27;);

            if ( _r === &#x27;block&#x27; ) {
                _r = &#x27;block&#x27;;
            } else {
                _r = &quot;float&quot;;
            }

            return _r;
        },

        // multiselect: function () {
        //     var _r = this.boolProp(&#x27;multiselect&#x27;);

        //     ( typeof _r === &#x27;undefined&#x27; ) &amp;&amp; ( _r = false );

        //     return _r;
        // },

        allYearsTpl: function (_startYear, _endYear) {
            //前14年后13年
            var _p = this,
                _r = &#x27;&lt;tr&gt;&#x27;,
                i,
                j;

            for ( i = _startYear, j = 1; i &lt;= _endYear; i++ ) {
                _r += &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCYear&quot; data-year=&quot;&#x27; + i + &#x27;&quot;&gt;&#x27; + i + &#x27;&lt;/a&gt;&lt;/td&gt;&#x27;

                if ( j % 7 === 0 ) {
                    if ( j === 28 ) {
                        _r += &#x27;&lt;/tr&gt;&lt;tr&gt;&#x27;
                        return _r;
                    } else {
                        _r += &#x27;&lt;/tr&gt;&#x27;
                    }
                }

                j++
            }

            return _r;

        },

        datesOfMonthTpl: function (_date) {
           
            var _p = this,
                _r = &#x27;&lt;tr&gt;&#x27;,
                _t,
                _d,
                _today = new Date(),
                _formatDate,
                _day,
                _maxDayOfMonth = JC.f.maxDayOfMonth(_date),
                _placeholder = &#x27;&#x27;,
                i,
                j,
                _todayClass,
                _weekendClass;

            for ( i = 1; i &lt;= _maxDayOfMonth; i++ ) {
                _d = new Date(_date.getFullYear(), _date.getMonth(), i);
                _formatDate = JC.f.formatISODate(_d);
                _day = (_d.getDay() + 6) % 7;
                _todayClass = &#x27;&#x27;;
                _weekendClass = &#x27;&#x27;;

                ( JC.f.isSameDay(_today, _d) ) &amp;&amp; ( _todayClass = &quot;today&quot; );
                ( _day === 5 || _day === 6 ) &amp;&amp; ( _weekendClass = &quot;weekend&quot; ); 
                
                _t = &#x27;&lt;td&gt;&#x27; 
                    + &#x27;&lt;a href=&quot;javascript:;&quot; title=&quot;&#x27; + _formatDate 
                    + &#x27;&quot; data-date=&quot;&#x27; + _formatDate 
                    + &#x27;&quot; class=&quot;&#x27; + _todayClass + _weekendClass
                    + &#x27;&quot; &gt;&#x27; + i 
                    + &#x27;&lt;/a&gt;&lt;/td&gt;&#x27;; 
               
                if ( i === 1 &amp;&amp; _day &gt; 0) {
                    
                    j = _day;

                    while ( j-- ) {
                        _placeholder += &#x27;&lt;td &gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&lt;/a&gt;&lt;/td&gt;&#x27;;
                    }

                    _r = _r + _placeholder;
                    _placeholder = &#x27;&#x27;;
                   
                }

                _r += _t;

                if ( i === _maxDayOfMonth &amp;&amp; _day &lt; 6) {

                    j = 6 - _day;

                    while ( j-- ) {
                        _placeholder += &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&lt;/a&gt;&lt;/td&gt;&#x27;;
                    }

                    _r = _r + _placeholder;
                    _placeholder = &#x27;&#x27;;

                }

                if ( _day === 6 ) {
                    if ( i === _maxDayOfMonth ) {
                        _r = _r + &#x27;&lt;/tr&gt;&#x27;;
                    } else {
                        _r = _r + &#x27;&lt;/tr&gt;&lt;tr&gt;&#x27;;
                    }
                }

            }
  
            return _r;

        },

        monthTpl: &#x27;&lt;div class=&quot;CDC_inner&quot;&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_header&quot;&gt;&#x27;
                        + &#x27;&lt;div class=&quot;CDC_header_tools&quot;&gt;&#x27;
                            + &#x27;&lt;a href=&quot;javascript:;&quot; data-date=&quot;{2}&quot; class=&quot;CDC_Date&quot;&gt;返回今天&lt;/a&gt;&#x27;
                            + &#x27;&lt;a href=&quot;javascript:;&quot; data-date=&quot;{3}&quot; class=&quot;CDC_Date&quot;&gt;返回选中日期&lt;/a&gt;&#x27;
                        + &#x27;&lt;/div&gt;&#x27;
                        + &#x27;&lt;h4&gt;&#x27;
                            + &#x27;&lt;a href=&quot;javascript:;&quot; data-date=&quot;{1}&quot; class=&quot;CDC_Year&quot;&gt;{0}&lt;/a&gt;&#x27;
                        + &#x27;&lt;/h4&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_body&quot;&gt;&#x27;  
                        + &#x27;&lt;table class=&quot;CDC_month_body&quot;&gt;&#x27;
                            + &#x27;&lt;tbody&gt;&#x27;
                                + &#x27;&lt;tr&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;0&quot;&gt;一月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;1&quot;&gt;二月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;2&quot;&gt;三月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;3&quot;&gt;四月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;4&quot;&gt;五月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;5&quot;&gt;六月&lt;/a&gt;&lt;/td&gt;&#x27;
                                + &#x27;&lt;/tr&gt;&#x27;
                                + &#x27;&lt;tr&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;6&quot;&gt;七月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;7&quot;&gt;八月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;8&quot;&gt;九月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;9&quot;&gt;十月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;10&quot;&gt;十一月&lt;/a&gt;&lt;/td&gt;&#x27;
                                    + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;js_compDCMonth&quot; data-month=&quot;11&quot;&gt;十二月&lt;/a&gt;&lt;/td&gt;&#x27;
                                + &#x27;&lt;/tr&gt;&#x27;
                            + &#x27;&lt;/tbody&gt;&#x27;
                        + &#x27;&lt;/table&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                +&#x27;&lt;/div&gt;&#x27;,

        yearTpl: &#x27;&lt;div class=&quot;CDC_inner&quot;&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_header&quot;&gt;&#x27;
                        + &#x27;&lt;div class=&quot;CDC_header_tools&quot;&gt;&#x27;
                            + &#x27;&lt;a href=&quot;javascript:;&quot; data-date=&quot;{0}&quot; class=&quot;CDC_Date&quot;&gt;返回今天&lt;/a&gt;&#x27;
                            + &#x27;&lt;a href=&quot;javascript:;&quot; data-date=&quot;{3}&quot; class=&quot;CDC_Date&quot;&gt;返回选中日期&lt;/a&gt;&#x27;
                        + &#x27;&lt;/div&gt;&#x27;
                        + &#x27;&lt;h4&gt;&lt;span&gt;{2}&lt;/span&gt;&lt;/h4&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_body&quot;&gt;&#x27;
                       + &#x27;&lt;table class=&quot;CDC_year_body&quot;&gt;&#x27;
                           + &#x27;&lt;tbody&gt;&#x27;
                           + &#x27;{1}&#x27;
                           + &#x27;&lt;/tbody&gt;&#x27;
                        + &#x27;&lt;/table&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                + &#x27;&lt;/div&gt;&#x27;,

        dateTpl: &#x27;&lt;div class=&quot;CDC_inner&quot; style=&quot;width: 182px;&quot; &gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_header&quot;&gt;&#x27;
                        + &#x27;&lt;h4&gt;&#x27;
                        + &#x27;&lt;a href=&quot;javascript:;&quot; title=&quot;更改年份&quot; data-date=&quot;{0}&quot; class=&quot;CDC_Year&quot;&gt;{1}&lt;/a&gt;&#x27;
                        + &#x27;&lt;a href=&quot;javascript:;&quot; title=&quot;更改月份&quot; data-date=&quot;{0}&quot; class=&quot;CDC_Month&quot;&gt;{2}&lt;/a&gt;&#x27;
                        + &#x27;&lt;/h4&gt;&#x27; 
                    + &#x27;&lt;/div&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_body&quot;&gt;&#x27;
                        + &#x27;&lt;table class=&quot;CDC_date_body CDC_date_body_left&quot;&gt;&#x27;
                            + &#x27;&lt;thead &gt;&#x27;
                                + &#x27;&lt;tr&gt;&#x27;
                                    + &#x27;&lt;th&gt;一&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;二&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;三&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;四&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;五&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;六&lt;/th&gt;&#x27;
                                    + &#x27;&lt;th&gt;日&lt;/th&gt;&#x27;
                                + &#x27;&lt;/tr&gt;&#x27;
                            + &#x27;&lt;/thead&gt;&#x27;
                            + &#x27;&lt;tbody&gt;&#x27;
                            +   &#x27;{3}&#x27;   
                            + &#x27;&lt;/tbody&gt;&#x27;
                        + &#x27;&lt;/table&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                + &#x27;&lt;/div&gt;&#x27;,

        baseTpl: &#x27;&lt;div class=&quot;CDCalendar_bounding_box&quot; style=&quot;display:none;&quot;&gt;&#x27;
                    + &#x27;&lt;div class=&quot;CDC_container&quot; &gt;&#x27;
                        + &#x27;&lt;div class=&quot;CDC_content_box&quot; &gt;&#x27;
                            + &#x27;&lt;div class=&quot;CDC_arrow&quot; &gt;&#x27;
                                + &#x27;&lt;a  href=&quot;javascript:;&quot; class=&quot;CDC_close_btn&quot; title=&quot;关闭&quot;&gt;close&lt;/a&gt;&#x27;
                                + &#x27;&lt;a  href=&quot;javascript:;&quot; class=&quot;CDC_prev_btn&quot; data-action=&quot;prev&quot;&gt;prev&lt;/a&gt;&#x27;
                                + &#x27;&lt;a  href=&quot;javascript:;&quot; class=&quot;CDC_next_btn&quot; data-action=&quot;next&quot;&gt;next&lt;/a&gt;&#x27;
                                + &#x27;&lt;a  href=&quot;javascript:;&quot; class=&quot;CDC_clear&quot; title=&quot;清除&quot;&gt;clear&lt;/a&gt;&#x27;
                            + &#x27;&lt;/div&gt;&#x27;
                            + &#x27;&lt;div class=&quot;CDC_date_box&quot; &gt;&#x27;
                               + &#x27;{0}&#x27;
                            + &#x27;&lt;/div&gt;&#x27;
                        + &#x27;&lt;/div&gt;&#x27;
                    + &#x27;&lt;/div&gt;&#x27;
                + &#x27;&lt;/div&gt;&#x27;,

        buildYearTpl: function (_date, _startYear, _endYear) {
            var _p = this,
                _r = _p.yearTpl;

            _p.layoutBox().find(&#x27;.CDC_date_box&#x27;).html(
                JC.f.printf( 
                    _r, 
                    JC.f.formatISODate(_date), 
                    _p.allYearsTpl(_startYear, _endYear), 
                    _startYear + &#x27; ~ &#x27; + _endYear,
                    JC.f.formatISODate(_p.curSelectedDate())  
                )
            )
            .find(&#x27;.CDC_year_body&gt;tbody&gt;tr&gt;td&gt;a&#x27;).each( function () {
                var _sp = $(this),
                    _year = _sp.data(&#x27;year&#x27;),
                    _d = new Date(_year, 0, 1);

                ( _year === new Date().getFullYear() ) &amp;&amp; ( _sp.addClass(&#x27;today&#x27;) );

                ( _year === _p.curYear() ) &amp;&amp; ( _sp.parent(&#x27;td&#x27;).addClass(&#x27;selected_date&#x27;) );

                ( ( _p.maxYear() &amp;&amp; ( _year &gt; _p.maxYear() ) ) 
                    || ( _p.minYear() &amp;&amp; ( _year &lt; _p.minYear() ) ) 
                ) &amp;&amp; ( _sp.addClass(&#x27;disabled&#x27;) );

                _sp.attr(&#x27;data-date&#x27;, JC.f.formatISODate( _d ));

            } );
            _p.layoutBox()
            .find(&#x27;.CDC_prev_btn&#x27;)
                .attr(&#x27;data-type&#x27;, &#x27;year&#x27;)
                .attr(&#x27;data-date&#x27;, JC.f.formatISODate (new Date(_startYear - 1, 0, 1) ))
            .end()
            .find(&#x27;.CDC_next_btn&#x27;)
                .attr(&#x27;data-type&#x27;, &#x27;year&#x27;)
                .attr(&#x27;data-date&#x27;, JC.f.formatISODate (new Date(_endYear + 1, 0, 1) ));

            _p.layoutBox().css(&#x27;width&#x27;, 466);
            _p.disablePageBtn();
            _p.position();
        },

        buildMonthTpl: function ( _date ) {
            var _p = this,
                _r = _p.monthTpl,
                _prevT = new Date(_date.getFullYear() - 1, 11, 1);

            _p.layoutBox().find(&#x27;.CDC_date_box&#x27;).html(
                JC.f.printf( 
                    _r, 
                    _date.getFullYear() + &#x27;年&#x27;, 
                    JC.f.formatISODate(_date),
                    JC.f.formatISODate(new Date()),
                    JC.f.formatISODate(_p.curSelectedDate()) 
                )
            )
            .find(&#x27;.CDC_month_body&gt;tbody&gt;tr&gt;td&gt;a&#x27;).each( function ( _ix ) {
                var _sp = $(this),
                    _month = _sp.data(&#x27;month&#x27;),
                    _d = new Date(_date.getFullYear(), _month , 1),
                    _tempD = new Date(_d.getFullYear(), _month, JC.f.maxDayOfMonth(_d));

                ( JC.f.isSameMonth(_d, new Date()) ) &amp;&amp; ( _sp.addClass(&#x27;today&#x27;) );

                ( JC.f.isSameMonth(_p.curSelectedDate(), _d )) &amp;&amp; ( _sp.parent(&#x27;td&#x27;).addClass(&#x27;selected_date&#x27;) );

                ( ( _p.minValue() &amp;&amp; ( _p.minValue().getTime() &gt; _tempD.getTime() ) )
                    || ( _p.maxValue() &amp;&amp; ( _p.maxValue().getTime() &lt; _d.getTime() ) )
                 ) &amp;&amp; ( _sp.addClass(&#x27;disabled&#x27;) );

                _sp.attr(&#x27;data-date&#x27;, JC.f.formatISODate( _d ));

            } )
            .end()
            .end()
            .find(&#x27;.CDC_prev_btn&#x27;)
                .attr(&#x27;data-date&#x27;, JC.f.formatISODate(new Date(_date.getFullYear() - 1, 11, JC.f.maxDayOfMonth(_prevT))))
                .attr(&#x27;data-type&#x27;, &#x27;month&#x27;)
            .end()
            .find(&#x27;.CDC_next_btn&#x27;)
                .attr(&#x27;data-date&#x27;, JC.f.formatISODate(new Date(_date.getFullYear() + 1, 0, 1)))
                .attr(&#x27;data-type&#x27;, &#x27;month&#x27;)

            _p.disablePageBtn();
            _p.position();
            _p.layoutBox().css(&#x27;width&#x27;, 466);

        },

        buildDateTpl: function (_date) {
            
            var _p = this,
                _tpl = &#x27;&#x27;,
                _curDate = _date || _p.curSelectedDate(),
                _curYear = _curDate.getFullYear(),
                _curMonth = _curDate.getMonth(),
                _monthNum = _p.monthNum(),
                _prevDate = new Date(_curYear, _curMonth, 1),
                _nextDate,
                _tempDate;

            while ( _monthNum-- ) {
                
                _tpl += JC.f.printf( 
                    _p.dateTpl, 
                    JC.f.formatISODate(_curDate),
                    _curYear + &#x27;年&#x27;, 
                    (_curMonth + 1) + &#x27;月&#x27;,
                    _p.datesOfMonthTpl(_curDate)
                );

                _curDate = new Date(_curYear, _curMonth + 1, 1);                
                _curYear = _curDate.getFullYear();
                _curMonth = _curDate.getMonth();

            }

            _tempDate = new Date(_curYear, _curMonth - 1, 1);
            _nextDate = new Date(_curYear, _curMonth - 1, JC.f.maxDayOfMonth(_tempDate));

            _p.layoutBox().find(&#x27;.CDC_date_box&#x27;)
                .html( _tpl )
                .find(&#x27;.CDC_date_body&gt;tbody&gt;tr&gt;td&gt;a[data-date]&#x27;).each( function ( _ix ) {
                    var _sp = $(this),
                        _d = JC.f.dateDetect(_sp.data(&#x27;date&#x27;));

                    ( JC.f.isSameDay(_d, _p.curSelectedDate()) ) 
                        &amp;&amp; ( _sp.parent(&#x27;td&#x27;).addClass(&#x27;selected_date&#x27;) );
                    

                    (_p.minValue() &amp;&amp; _d.getTime() &lt; _p.minValue().getTime() ) 
                        &amp;&amp; ( _sp.addClass(&#x27;disabled&#x27;) );
                      

                    ( _p.maxValue() &amp;&amp; _d.getTime() &gt; _p.maxValue().getTime() ) 
                        &amp;&amp; ( _sp.addClass(&#x27;disabled&#x27;) );

                    ( !_p.currentCanSelect() &amp;&amp; JC.f.isSameDay( _d, new Date() ) )
                        &amp;&amp; ( _sp.addClass(&#x27;disabled&#x27;) );
                
                } )
                .end()
                .end()
                    .find(&#x27;.CDC_next_btn&#x27;)
                        .attr(&#x27;data-date&#x27;, JC.f.formatISODate(_nextDate))
                        .attr(&#x27;data-type&#x27;, &#x27;date&#x27;)
                .end()
                    .find(&#x27;.CDC_prev_btn&#x27;)
                        .attr(&#x27;data-date&#x27;, JC.f.formatISODate(_prevDate))
                        .attr(&#x27;data-type&#x27;, &#x27;date&#x27;);

            _p.disablePageBtn();
            _p.fixTable();

        },

        disablePageBtn: function () {
            var _p = this,
                _prevBtn = _p.layoutBox().find(&#x27;.CDC_prev_btn&#x27;),
                _nextBtn = _p.layoutBox().find(&#x27;.CDC_next_btn&#x27;),
                _prevDate = JC.f.dateDetect(_prevBtn.attr(&#x27;data-date&#x27;)),
                _nextDate = JC.f.dateDetect(_nextBtn.attr(&#x27;data-date&#x27;));

            if ( _p.minValue() &amp;&amp; ( _p.minValue().getTime() &gt; _prevDate.getTime() ) ) {
                _prevBtn.addClass(&#x27;CDC_prev_btn_disabled&#x27;)
                    .prop(&#x27;disabled&#x27;, true);
            } else {
                _prevBtn.removeClass(&#x27;CDC_prev_btn_disabled&#x27;)
                    .prop(&#x27;disabled&#x27;, false);
            }

            if ( _p.maxValue() &amp;&amp; ( _p.maxValue().getTime() &lt; _nextDate.getTime() ) ) {
                _nextBtn.addClass(&#x27;CDC_next_btn_disabled&#x27;)
                    .prop(&#x27;disabled&#x27;, true);
            } else {
                _nextBtn.removeClass(&#x27;CDC_next_btn_disabled&#x27;)
                    .prop(&#x27;disabled&#x27;, false);
            }

        },

        layout: function () {
            var _p = this;

            !this._layout &amp;&amp; ( this._layout = _p.layoutBox().find(&#x27;div.CDCalendar_bounding_box&#x27;) ) ;
 
            return this._layout;
        },

        layoutBox: function () {
            var _p = this,
                _r = $(&#x27;#&#x27; + DCalendar.Model._boxId );

            if ( !(_r &amp;&amp; _r.length) ) {
                _r = $(JC.f.printf( &#x27;&lt;div id=&quot;{0}&quot; style=&quot;width:466px;position:absolute;&quot;&gt;&#x27; + _p.baseTpl + &#x27;&lt;/div&gt;&#x27;, DCalendar.Model._boxId ))
                    .appendTo( document.body );
            }

            return _r;
        },

        position: function () {
            var _p = this,
                _x = _p.selector().offset().left,
                _y = _p.selector().offset().top + _p.selector().prop(&#x27;offsetHeight&#x27;),
                _tempX,
                _tempY,
                _win = $(window);

            //上下溢出
            if ( ( _win.outerHeight() + _win.scrollTop() ) &lt; ( _y + _p.layout().height() ) ) {
                _tempY = _p.selector().offset().top  - _p.layout().height();
                ( _tempY &gt;= 0 ) &amp;&amp; ( _y = _tempY );
            } else {
                _y = _p.selector().offset().top + _p.selector().prop(&#x27;offsetHeight&#x27;);
            }

            //左右溢出

            if ( ( _win.outerWidth() + _win.scrollLeft() ) &lt; ( _x + _p.layoutBox().outerWidth(true) ) ) {
                _tempX = _p.selector().offset().left + _p.selector().outerWidth() - _p.layoutBox().outerWidth(true);
                ( _tempX &gt;= 0 ) &amp;&amp; ( _x = _tempX );
            } else {
                _x = _p.selector().offset().left;
            }

            _p.layoutBox().css({
                left: _x,
                top: _y
            });

        },

        setSelected: function (_srcSelector) {
            var _p = this,
                _el = $(_srcSelector),
                _td = JC.f.getJqParent(_el, &#x27;td&#x27;),
                _d = _el.data(&#x27;date&#x27;);

            _p.layoutBox().find(&#x27;.CDC_date_body&gt;tbody&gt;tr&gt;td&#x27;).removeClass(&#x27;selected_date&#x27;);

            _td.addClass(&#x27;selected_date&#x27;).data(&#x27;date&#x27;);

            _p.selector().val(_d);

        },

        clear: function () {
            var _p = this;

            _p.layoutBox().find(&#x27;.CDC_date_body&gt;tbody&gt;tr&gt;td&#x27;).removeClass(&#x27;selected_date&#x27;);
            _p.selector().val(&#x27;&#x27;);
        },

        fixTable: function () {
            var _p = this,
                _tables = _p.layoutBox().find(&#x27;.CDC_date_body&#x27;),
                _t = &#x27;&lt;tr&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                        + &#x27;&lt;td&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;disabled&quot;&gt;&amp;nbsp;&lt;/a&gt;&lt;/td&gt;&#x27;
                    + &#x27;&lt;/tr&gt;&#x27;,
                _max = 0;

            _tables.each( function ( _ix ) {
                var _sp = $(this),
                    _len = _sp.find(&#x27;tbody&gt;tr&#x27;).length;

                ( _len &gt; _max ) &amp;&amp; ( _max = _len );
       
            } );

            _tables.each( function () {
                var _sp = $(this),
                    _len = _sp.find(&#x27;tbody&gt;tr&#x27;).length;

                ( _len &lt; _max ) &amp;&amp; ( _sp.find(&#x27;tbody&#x27;).append(_t) );

            });

            if ( _p.showtype() === &#x27;float&#x27; ) {
                if ( _p.monthNum() === 2 || _p.monthNum() === 4 ) {
                    _p.layoutBox().css(&#x27;width&#x27;, 466);
                } else {
                    _p.layoutBox().css(&#x27;width&#x27;, 678);
                }
            } else {
                _p.layoutBox().css(&#x27;width&#x27;, 267);
            }

        },

        /**
         * DCalendar显示时的回调
        */
        calendarshow: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;calendarshow&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * DCalendar隐藏时的回调
        */
        calendarhide: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;calendarhide&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 清除选中的日期后的回调
        */
        calendarclear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;calendarclear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 选择日期赋值后的回调
        */
        updatedate: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updatedate&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 更改月份之前的回调，月历面板显示后
        */
        beforeupdatemonth: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;beforeupdatemonth&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 更改月份后的回调
        */
        updatemonth: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updatemonth&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 更改年份之前的回调，年份面板显示后
        */
        beforeupdateyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;beforeupdateyear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 更改年份后的回调
        */
        updateyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updateyear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击下一月的回调
        */
        updatenextmonth: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updatenextmonth&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击上一月的回调
        */
        updateprevmonth: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updateprevmonth&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击下一年的回调
        */
        updatenextyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updatenextyear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击上一年的回调
        */
        updateprevyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updateprevyear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击下一页年份的回调
        */
        updatenextpageyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updatenextpageyear&quot;;

            return _p.callbackProp(_selector, _key);
        },

        /**
         * 点击上一页年份的回调
        */
        updateprevpageyear: function () {
            var _p = this,
                _selector = _p.selector(),
                _key = &quot;updateprevpageyear&quot;;

            return _p.callbackProp(_selector, _key);
        }
        
    });
 
    JC.f.extendObject(DCalendar.View.prototype, {
        init: function () {
            var _p = this;
        },

        update: function () {
            var _p = this;

            _p._model.position();

            _p._model.layout().data(&#x27;CDCalendarIns&#x27;, _p);

        },

        yearView: function (_srcSelector) {
            var _p = this,
                _el = $( _srcSelector ),
                _date = new Date(),
                _startYear = _date.getFullYear() - 14,
                _endYear = _date.getFullYear() + 13;

            _p._model.buildYearTpl(_date, _startYear, _endYear);

        },

        monthView: function (_srcSelector) {
            var _p = this,
                _el = $(_srcSelector),
                _date = JC.f.dateDetect(_el.data(&#x27;date&#x27;));

            _p._model.buildMonthTpl(_date);

        },

        dateView: function (_srcSelector) {
            var _p = this,
                _el = $( _srcSelector ),
                _curDate = JC.f.dateDetect(_el.data(&#x27;date&#x27;));

            _p._model.buildDateTpl(_curDate);
            
        },

        change: function  (_srcSelector) {
            var _p = this,
                _el = $(_srcSelector),
                _action = _el.data(&#x27;action&#x27;),
                _type = _el.attr(&#x27;data-type&#x27;),
                _curDate ,
                _nextMonthDate,
                _nextYear,
                _startYear,
                _endYear;

            switch ( _type ) {
                case &#x27;year&#x27;:
                    {   
                        _curDate = JC.f.dateDetect(_el.attr(&#x27;data-date&#x27;));
                
                        if ( _action == &#x27;prev&#x27; ) {
                            _endYear = _curDate.getFullYear();
                            _startYear = _endYear - 27;

                            _p.trigger(DCalendar.Model.UPDATEPREVPAGEYEAR);

                        } else {
                            _startYear = _curDate.getFullYear();
                            _endYear = _startYear + 27;

                            _p.trigger(DCalendar.Model.UPDATENEXTPAGEYEAR);

                        }

                        _p._model.buildYearTpl(new Date(), _startYear, _endYear);

                        break;
                    }

                case &#x27;month&#x27;: 
                    {   
                        _curDate = JC.f.dateDetect(_el.attr(&#x27;data-date&#x27;));

                        if ( _action === &#x27;prev&#x27; ) { 
                            _p.trigger(DCalendar.Model.UPDATEPREVYEAR);
                        } else {
                            _p.trigger(DCalendar.Model.UPDATENEXTYEAR);
                        }

                        _p._model.buildMonthTpl(_curDate);

                        break;
                    }

                case &#x27;date&#x27;:
                default:
                    if ( _action === &#x27;prev&#x27; ) {
                        _nextMonthDate = JC.f.dateDetect(_el.attr(&#x27;data-date&#x27;));
                        _curDate = new Date(_nextMonthDate.getFullYear(), _nextMonthDate.getMonth() - _p._model.monthNum() + 1, 1);
                       _p.trigger(DCalendar.Model.UPDATEPREVMONTH);

                    } else {
                        _curDate = JC.f.dateDetect(_el.attr(&#x27;data-date&#x27;));
                        _p.trigger(DCalendar.Model.UPDATENEXTMONTH);
                        
                    }
                    _p._model.buildDateTpl(_curDate);
                    _p._model.position();

            }

        },

        show: function () {
            var _p = this;

            //var _s = new Date().getTime(),
            //    _e ;

            _p._model.buildDateTpl();
            //_e = new Date().getTime();
            //console.log( &quot;_s&quot;, &quot;_e&quot;, _e - _s );
            _p.update();
            _p._model.layout().show();

            _p._model.layout().data(&#x27;CDCalendarShow&#x27;, _p);
            
        },

        hide: function () {
            var _p = this;

            _p._model.layout().hide();

        }

    });

    var _doc = $(document)
        , _selector = &#x27;input[datatype=ddate], button[datatype=ddate], input[datatype=drange]&#x27;
        ;

    _doc.delegate(_selector, &#x27;focus&#x27;, function (_evt) {

        $(this).addClass(&#x27;cdc_ignore&#x27;, true);
        JC.f.safeTimeout( function(){
            DCalendar.pickDate( _evt.target || _evt.srcElement);
        }, null, &#x27;DCalendarClick&#x27;, 50 );
  
    });

    _doc.delegate(_selector, &#x27;click&#x27;, function (_evt) {

        $(this).addClass(&#x27;cdc_ignore&#x27;, true);
        JC.f.safeTimeout( function(){
            DCalendar.pickDate(_evt.target || _evt.srcElement);
        }, null, &#x27;DCalendarClick&#x27;, 50 );

    });

    _doc.on(&#x27;click&#x27;, function (_evt) {
        
        var _ins = DCalendar.getInstance(DCalendar.lastSrc),
            _srcSelector = _evt.target || _evt.srcElement;

        if ( _ins &amp;&amp;  _ins._model.isDCalendar(_srcSelector) ) return;

        _ins &amp;&amp; _ins.trigger(DCalendar.Model.HIDDEN);

    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_close_btn&#x27;, &#x27;click&#x27;, function (_evt) {
        
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.HIDDEN);

    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_next_btn, #CompDCalendar .CDC_prev_btn&#x27;, &#x27;click&#x27;, function (_evt) {
       
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.CHANGE, [$(this)]);
       
    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_Month&#x27;, &#x27;click&#x27;, function (_evt) {

        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.MONTHVIEW, [$(this)]);
       
    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_Year&#x27;, &#x27;click&#x27;, function (_evt) {
      
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.YEARVIEW, [$(this)]);
       
    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_Date&#x27;, &#x27;click&#x27;, function (_evt) {

        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.DATEVIEW, [$(this)]);

    });

    _doc.delegate(&#x27;#CompDCalendar&#x27;, &#x27;click&#x27;, function (_evt) {
        _evt.stopPropagation();
    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_date_body&gt;tbody&gt;tr&gt;td&gt;a:not(&quot;.disabled&quot;)&#x27;, &#x27;click&#x27;, function (_evt) {
        
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.SETDATE, [$(this)]);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.HIDDEN );

    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_month_body&gt;tbody&gt;tr&gt;td&gt;a:not(&quot;.disabled&quot;)&#x27;, &#x27;click&#x27;, function (_evt) {
        
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.DATEVIEW, [$(this)]);
        
    } );

    _doc.delegate(&#x27;#CompDCalendar .CDC_year_body&gt;tbody&gt;tr&gt;td&gt;a:not(&quot;.disabled&quot;)&#x27;, &#x27;click&#x27;, function (_evt) {
      
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.MONTHVIEW, [$(this)]);
        
    });

    _doc.delegate(&#x27;#CompDCalendar .CDC_clear&#x27;, &#x27;click&#x27;, function (_evt) {
       
        var _ins = DCalendar.getInstance(DCalendar.lastSrc);
        _ins &amp;&amp; _ins.trigger(DCalendar.Model.CLEAR, [$(this)]);

    });

    $(window).on(&#x27;resize scroll&#x27;, function () {

        JC.f.safeTimeout( function(){
           DCalendar.update(); 
        }, null, &#x27;DCalendarResize&#x27;, 20 );

    });

    _doc.ready(function () {
        DCalendar.init(true);
    });    
    
    return JC.DCalendar;

});}( typeof define === &#x27;function&#x27; &amp;&amp; define.amd ? define : 
        function ( _name, _require, _cb ) { 
            typeof _name == &#x27;function&#x27; &amp;&amp; ( _cb = _name );
            typeof _require == &#x27;function&#x27; &amp;&amp; ( _cb = _require ); 
            _cb &amp;&amp; _cb(); 
        }
        , window
    )
);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
