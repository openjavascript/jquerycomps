<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lazyload demo</title>
    <link href='../../../../modules/JC.Lazyload/3.0/res/default/style.css' rel='stylesheet' />
    <style>

       *{
            margin: 0; padding: 0;
        }
        ul{
            list-style: none;
            width: 400px;
        }
        .lazybox ul{
            /*width: 1170px;
            overflow: visible;*/
            /*width: 4200px;*/
          
        }
        li{
          display: inline-block;
            width: 148px;
            height: 148px;
            /*width: 400px;
            height: 450px;*/
            vertical-align: middle;
            border:1px solid #eee;
            
         /*   margin-right: 10px;*/
            margin-bottom: 10px;
            background:#eee url(http://p16.qhimg.com/t01350025706569e893.gif) 50% 50% no-repeat;
        }

        li img{
            width: 100%;
            height: 100%;
        }
        
        h2{
            font-size: 14px; 
            font-weight: normal;
            font-family: 'Microsoft Yahei';
        }

    </style>
</head>
<body>
    <div  style=" margin:20px auto;">
        
        <h2 >加载ajax数据</h2>
        <div  class="js_compLazyLoad" lazydatasource=".loading" lazydatatype="ajax" lazybeforeload="beforeload" >
            
            <div id="1" style="height:500px; background:#eee; margin-bottom:20px;"  lazyajaxurl="../_demo/data/imglist_text.php" class="loading"></div>
            <h3>lazydatafilter回调方法</h3>
            <div id="2" style="height:500px; background:#eee; margin-bottom:20px;" lazydataFilter="dataFilter"  lazyajaxurl="../_demo/data/imglist.php" class="loading"></div>
            <div id="3" style="height:500px; background:#eee; margin-bottom:20px;" lazyajaxurl="../_demo/data/imglist_text.php" class="loading"></div>

        </div>
    </div>

   
    <script src="../../../../lib.js"></script>
    <script src="../../../../config_3.0.js"></script>
    <script>
        JC.debug = true;
        requirejs( [ 'JC.Lazyload' ], function(){
        });

        function beforeload() {
           // console.log("beforeLoad");
        }

        function dataFilter( _json ) {
            var _datalist,
                _htmlList = [];

            if ( _json.data && _json.data.length ) {
                _datalist = _json.data;
                _htmlList.push('<ul>')
            }

            $.each(_datalist, function ( _ix, _item ) {
                var _str = '<li><img src="' + _item + '" /></li>';
                _htmlList.push(_str);
            });

            _htmlList.push('</ul>');
            
            _json.data = _htmlList.join(' ');
          
            return _json;
        }
    </script>
</body>
</html>
